



#  """
# LLM prompts for lead analysis.
# """

BATCH_PROMPT = """Проанализируй сообщения из Telegram чатов.
Определи, выражает ли автор каждого сообщения интерес к:
1. АРЕНДЕ или ПОКУПКЕ НЕДВИЖИМОСТИ (type: "property")
2. АРЕНДЕ ТРАНСПОРТА (type: "vehicle")

=== НЕДВИЖИМОСТЬ (property) ===
Признаки лида:
- Ищет квартиру/дом/комнату/кондо в аренду или на покупку
- Спрашивает о ценах на недвижимость
- Ищет риелтора или агентство

НЕ лид (Лендлорды/Предложения):
- "Сдаю", "Сдается", "Available", "For rent", "My condo"
- "Свободные даты", "Free dates"
- Предлагает свою недвижимость
- Ищет ОТЕЛЬ, гостиницу, хостел или посуточную аренду (только долгосрок!)

=== ТРАНСПОРТ (vehicle) ===
Признаки лида:
- Ищет машину/автомобиль в аренду
- Ищет мотоцикл/байк в аренду
- Ищет скутер/мопед в аренду
- Хочет КУПИТЬ транспорт 

НЕ лид (Арендодатели/Предложения):
- "Сдаю байк", "В наличии", "Available for rent", "I have bike"
- Предлагает транспорт в аренду
- Ищет ВОДНЫЙ транспорт: лодки, катера, яхты, гидроциклы, jet ski

=== ОБЩИЕ ИСКЛЮЧЕНИЯ ===
- Обсуждает без намерения арендовать/купить
- Просто комментирует чужое предложение без собственного запроса (кроме вопросов цены/деталей покупки)
- Реклама/спам

ФОРМАТ ОТВЕТОВ: 
- Сообщения с "(↩ ...)" — ответы на другие сообщения.
- Сообщения с одинаковым (user:ID) — от одного человека. Анализируй их ВМЕСТЕ как один потенциальный лид.

ВАЖНО: Верни ТОЛЬКО лиды. Если лидов нет — верни пустой массив [].
Если несколько сообщений от одного user_id — верни ОДИН лид с любым id из его сообщений.

Формат ответа (ТОЛЬКО JSON без markdown):
[{{"id": номер, "type": "property"|"vehicle", "confidence": 0.0-1.0, "reason": "Локация: ..., Бюджет: ..., Срок: ..."}}]
(В поле reason обязательно укажи Локацию, Бюджет и Срок, если они есть в тексте. Если нет — краткую суть запроса).

Сообщения:
{messages}
"""


IT_SERVICES_PROMPT = """Проанализируй сообщения из Telegram чатов.
Определи, ищет ли автор каждого сообщения IT-услуги.
Если кто-то предлагает it-услуги тоже пиши, определяй. 

=== IT-УСЛУГИ (it_services) ===
Признаки лида:
- Ищет разработчика сайта, лендинга, интернет-магазина
- Нужен Telegram/WhatsApp/чат-бот
- Ищет специалиста по AI/ИИ, нейросетям, автоматизации
- Нужна разработка мобильного приложения (iOS/Android)
- Ищет программиста, веб-разработчика, фрилансера
- Нужна интеграция с CRM, API, платежными системами
- Ищет SEO, настройку рекламы, SMM
- Нужна автоматизация бизнес-процессов
- Ищет парсинг данных, скрапинг
- Нужен дизайн UI/UX


Предлагающий свои услуги: 
- Предлагает свои IT-услуги ("Делаю сайты", "Разработчик ищет проекты")
- Ищет работу/вакансии в IT
- Реклама своих услуг 
- и тд.

НЕ лид:
- Обсуждение технологий без запроса/предложения услуг
- Обучающие курсы/инфобизнес

=== ОБЩИЕ ИСКЛЮЧЕНИЯ ===
- Просто комментирует без запроса
- Реклама/спам
- Вопросы из любопытства без реального намерения заказать

ФОРМАТ ОТВЕТОВ: 
- Сообщения с "(↩ ...)" — ответы на другие сообщения.
- Сообщения с одинаковым (user:ID) — от одного человека. Анализируй их ВМЕСТЕ как один потенциальный лид.

ВАЖНО: Верни ТОЛЬКО лиды. Если лидов нет — верни пустой массив [].
Если несколько сообщений от одного user_id — верни ОДИН лид с любым id из его сообщений.

Формат ответа (ТОЛЬКО JSON без markdown):
[{{"id": номер, "type": "it_services", "confidence": 0.0-1.0, "reason": "Услуга: ..., Детали: ..., Бюджет: ..."}}]
(В поле reason укажи тип услуги, детали запроса и бюджет если есть).

Сообщения:
{messages}
"""
